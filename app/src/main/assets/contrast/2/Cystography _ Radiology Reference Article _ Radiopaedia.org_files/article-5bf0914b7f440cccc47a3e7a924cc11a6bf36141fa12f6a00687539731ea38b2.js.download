function fitVideoToContainer(t,e){var i=e.height(),n=e.width();t.attr("style",null);var a=t.player();a.height(i),a.width(n),$("object",t).attr({width:n,height:i})}function fitImageToContainer(t,e){var i=t.attr("data-width"),n=t.attr("data-height"),a=e.width(),o=e.height();n/o>i/a?(newHeight=o,newWidth=newHeight/n*i):(newWidth=a,newHeight=newWidth/i*n),margin_top=(o-newHeight)/2,margin_left=(a-newWidth)/2,t.css({"margin-top":margin_top+"px","margin-left":margin_left+"px",height:newHeight+"px",width:newWidth+"px"})}function isVideo(t){return"VIDEO"==t.attr("tagName")}function fitImagesToContainer(t){img=t.find("li > img, li video"),img.each(function(){mediaElem=$(this);var e=isVideo(mediaElem)?fitVideoToContainer:fitImageToContainer;e(mediaElem,t)},0)}function ensureHeight(t,e){t.height()<e&&t.height(e)}!function(t){t.fn.jScroll=function(e){function i(t,e){this.min=t.offset().top,this.originalMargin=parseInt(t.css("margin-top"),10)||0,this.getMargin=function(i){var n=this.originalMargin,a=t.parent().height()-t.outerHeight()-e;return i.scrollTop()>=this.min&&(n=n+parseInt(t.attr("top"),10)+i.scrollTop()-this.min),n>a&&(n=a),0>n&&(n=0),{marginTop:n+"px"}}}var n=t.extend({},t.fn.jScroll.defaults,e);return this.each(function(){var e=t(this),a=t(window),o=new i(e,n.contentBottomOffset);e.attr("top",n.top),a.scroll(function(){e.stop().animate(o.getMargin(a),n.speed)})})},t.fn.jScroll.defaults={speed:"slow",top:10,contentBottomOffset:0}}(jQuery);var sidebarSelector=".two-column-layout-sidebar";$(function(){function t(t){!$("#article-gallery").is(":visible")||t&&0!=$(t.target).parents(sidebarSelector).length||($("#article-sidebar-info").unblock(),$("#article-gallery").hide(),null!=o&&ensureHeight($(sidebarSelector),o))}function e(){ensureHeight($("#content"),$("#article-gallery").height()),ensureHeight($(sidebarSelector),$("#content").outerHeight())}function i(){topMargin=($(window).height()-$("#article-gallery").height())/2,topMargin<0&&(topMargin=0),$("#article-gallery").attr("top",topMargin)}function n(){$(".carousel").bind("imageChanged",function(){fitImagesToContainer($(".image.target"))}),fitImagesToContainer($(".image.target"))}var a=!1,o=null,r=$("body").data().touchBrowser;$(document).bind("click",t),$("li a.thumbnail").click(function(l){if($(document).width()<992){var s=$(this).data().presentationPath;return void(void 0!==s&&(l.preventDefault(),window.location=s))}null==o&&(o=$(sidebarSelector).height()+20),$("#article-gallery").show().css("margin-top","0px"),$("#article-sidebar-info").css("position","absolute").block({message:null,baseZ:0,overlayCSS:{cursor:"default"}}),ensureHeight($(sidebarSelector),o),$(".blockOverlay").bind("click",function(e){t()}),a||r||$("#article-gallery").jScroll({contentBottomOffset:parseInt($(sidebarSelector+" .action-toolbar").outerHeight(),10)||0}),a=!0;var c=$(this),h=c.data("imageRef"),d=c.attr("data-resource-url");$(".carousel").attr("data-resource-url",d);var u=$(document.createElement("ul")).attr({"data-resource-url":d,id:"carousel","class":"carousel jcarousel-skin-radiopaedia"});$("div.jcarousel-skin-radiopaedia").replaceWith(u);var g=new OldGallery($("#article-gallery"));g.empty(),g.init(h,function(){n(),jQuery.browser.safari&&$(".carousel").jcarousel("setup"),g.clickThumb($('.carousel a[href $="'+c.data().imagePath+'"]')),e(),i(),$(window).scroll()}),e(),i(),$(window).scroll(),l.preventDefault()}),$("#close").click(function(e){t(),e.preventDefault()}),$(window).scroll(function(t){"undefined"==typeof t.originalEvent&&t.preventDefault()})}),function(){$(function(){return $(".snippet").each(function(t){return $(this).find('a[href="'+window.location.pathname+'"]').parents("ul").parents("li").siblings().children("ul").addClass("hide_snippet").hide(),$(this).find('a[href="'+window.location.pathname+'"]').parents("li").siblings().children("ul").addClass("hide_snippet").hide(),$(this).find('a[href="'+window.location.pathname+'"]').siblings("ul").children("li").children("ul").children("li").children("ul").addClass("hide_snippet").hide(),$(this).find('a[href="'+window.location.pathname+'"]').contents().unwrap().wrap("<b>"),$(this).find(".hide_snippet").before('<a href="#" class="snippet_expand_toggle">[+]</a>')}),$(".snippet_expand_toggle").click(function(t){var e;return t.preventDefault(),e=$(this).text(),"[+]"===e?($(this).text("[\u2013]"),$(this).siblings('ul[class="hide_snippet"]').show()):($(this).text("[+]"),$(this).siblings('ul[class="hide_snippet"]').hide())}),$(".snippet_hide_toggle").click(function(t){var e;return t.preventDefault(),e=$(this).text(),"hide"===e?($(this).text("show"),$(this).siblings(".snippet_content").slideToggle()):($(this).text("hide"),$(this).siblings(".snippet_content").slideToggle())})})}.call(this),function(){var t;t=function(t){var e,i;return i=$(t),i=i.length?i:$("[name="+t.slice(1)+"]"),i.length?(e=parseInt($("body").css("padding-top")),$("html, body").animate({scrollTop:i.offset().top-e},300)):void 0},$(function(){return $('a[href*="#"]:not([href="#"])').click(function(){return location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname?(t(this.hash),!1):void 0})}),$(document).on("DOMContentLoaded",function(){return null!=location.hash&&""!==location.hash?t(location.hash):void 0})}.call(this);